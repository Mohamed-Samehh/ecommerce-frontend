<app-nav-bar></app-nav-bar>
<div class="container my-4 w-75">
  <div class="row g-3 mb-3">
    <div class="col-lg-10">
      <app-search-bar [categories]="categories()" [authors]="authors()" (query)="handleQuery($event)"></app-search-bar>
    </div>
    <div class="col-lg-2 d-flex align-items-center">
      <div class="dropdown">
        <button class="btn button-color dropdown-toggle" type="button" data-bs-toggle="dropdown">
          {{ selectedLabel }}
        </button>
        <ul class="dropdown-menu dropdown-menu-custom">
          @for (option of sortOptions; track option.value) {
          <li>
            <a class="dropdown-item drop-category" (click)="onSortChange(option.value)">
              {{ option.label }}
            </a>
          </li>
          }
        </ul>
      </div>
    </div>
  </div>
</div>


<div class="row g-1 m-1 mb-5">
  <div class="col-lg-2 col-md-3">
    <app-filter (filterChange)="handleFilterCategories($event)" [categories]="categories()"></app-filter>
    <app-min-max-slider (range)="handlePriceChange($event)"></app-min-max-slider>
  </div>

  <div class="col-lg-10 col-md-9">
    @if(books().length === 0){
    <div class="d-flex justify-content-center align-items-center" style="height: 50vh;">
      <h3 class="text-color">No books found :C</h3>
    </div>
    }

    <div class="row g-3 m-1">
      @for(book of books(); track book._id) {
      <div class=" col-lg-4 col-xxl-3  col-md-6 d-flex justify-content-center">
        <app-book-card [routerLink]="['/book', book._id]" [book]="book"></app-book-card>
      </div>
      }
    </div>
  </div>
</div>


<div class="d-flex justify-content-center">
  <app-pagenation (emittedCurrentPage)="handlePageChange($event)" [totalNumberOfBooks]="totalNumberOfBooks()"
    [pageSize]="pageSize"></app-pagenation>

</div>
<app-footer></app-footer>